version: '3'
services:
  # frontend:
  #     image: nginx:latest
  #     container_name: appurate-front-build
  #     restart: always
  #     networks:
  #       - npm_default
  #     ports:
  #       - 3080:80
  #       - 3081:443
  #     volumes:
  #       - ./Front/dist:/usr/share/nginx/html:ro
  
  app:
    build: ./Front
    container_name: appurate-vite
    ports:
      - 5173:5173
    volumes:
      - ./Front:/app
      - /app/node_modules
    networks:
      - npm_default
    restart: always

  backend:
    build: ./Back
    container_name: appurate-back
    restart: always
    ports:
      - 3000:3000
    depends_on:
      - appurate-mongo
    networks:
      - npm_default
      - appurate-local
    volumes:
      - ./Back:/app
      - /app/node_modules

  appurate-mongo:
    image: mongo:latest
    container_name: appurate-mongo
    restart: always
    volumes:
      - ./data:/data/db
    networks:
      - appurate-local

  appurate-datamodel:
    container_name: appurate-datamodel
    build: ./Predict
    ports:
      - 5000:5000
    volumes:
      - ./Predict:/app
    networks:
      - appurate-local
      
      
      
networks:
  npm_default:
    name: npm_default
    external: true
  appurate-local:
    name: appurate-local
    external: false

